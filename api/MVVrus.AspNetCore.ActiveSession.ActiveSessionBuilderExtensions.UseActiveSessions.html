<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Method UseActiveSessions
 </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Method UseActiveSessions
 ">
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      
      
      
      
  </head>

  <script type="module">
    import options from './../public/main.js'
    import { init } from './../public/docfx.min.js'
    init(options)
  </script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="MVVrus.AspNetCore.ActiveSession.ActiveSessionBuilderExtensions.UseActiveSessions*">





<h1 id="MVVrus_AspNetCore_ActiveSession_ActiveSessionBuilderExtensions_UseActiveSessions_" data-uid="MVVrus.AspNetCore.ActiveSession.ActiveSessionBuilderExtensions.UseActiveSessions*" class="text-break">
  Method UseActiveSessions
  
</h1>

<div class="facts text-secondary">
  <dl><dt>Namespace</dt><dd><a class="xref" href="MVVrus.html">MVVrus</a>.<a class="xref" href="MVVrus.AspNetCore.html">AspNetCore</a>.<a class="xref" href="MVVrus.AspNetCore.ActiveSession.html">ActiveSession</a></dd></dl>
  <dl><dt>Assembly</dt><dd>MVVrus.AspNetCore.ActiveSession.dll</dd></dl>
</div>

<div class="markdown summary"></div>
<div class="markdown conceptual"></div>
















<a id="MVVrus_AspNetCore_ActiveSession_ActiveSessionBuilderExtensions_UseActiveSessions_" data-uid="MVVrus.AspNetCore.ActiveSession.ActiveSessionBuilderExtensions.UseActiveSessions*"></a>

<h3 id="MVVrus_AspNetCore_ActiveSession_ActiveSessionBuilderExtensions_UseActiveSessions_Microsoft_AspNetCore_Builder_IApplicationBuilder_MVVrus_AspNetCore_ActiveSession_IMiddlewareFilterSource_" data-uid="MVVrus.AspNetCore.ActiveSession.ActiveSessionBuilderExtensions.UseActiveSessions(Microsoft.AspNetCore.Builder.IApplicationBuilder,MVVrus.AspNetCore.ActiveSession.IMiddlewareFilterSource)">
  UseActiveSessions(IApplicationBuilder, IMiddlewareFilterSource?)
  
</h3>

<div class="markdown level1 summary"><p>Adds the ActiveSession midleware to an application middleware pipeline along with a filter defining a scope of HTTP requests,
for which an active session will be available.</p>
</div>
<div class="markdown level1 conceptual"></div>

<div class="codewrapper">
  <pre><code class="lang-csharp hljs">public static IApplicationBuilder UseActiveSessions(this IApplicationBuilder Builder, IMiddlewareFilterSource? Filter = null)</code></pre>
</div>

<h4 class="section">Parameters</h4>
<dl class="parameters">
  <dt><code>Builder</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.builder.iapplicationbuilder">IApplicationBuilder</a></dt>
  <dd><p>The application middleware pipeline builder</p>
</dd>
  <dt><code>Filter</code> <a class="xref" href="MVVrus.AspNetCore.ActiveSession.IMiddlewareFilterSource.html">IMiddlewareFilterSource</a></dt>
  <dd><p>A reference to an object instance implementing the <a class="xref" href="MVVrus.AspNetCore.ActiveSession.IMiddlewareFilterSource.html">IMiddlewareFilterSource</a> interface
that is used to filter requests for which an active session feature will be available
and specify the suffix to be added to an <a class="xref" href="MVVrus.AspNetCore.ActiveSession.ILocalSession.Id.html#MVVrus_AspNetCore_ActiveSession_ILocalSession_Id">Id</a> property
of active sessions assigned to requests that falls into the scope of the filter set by this method.
Defaults to null that means the feature will be available for all requests.</p>
</dd>
</dl>

<h4 class="section">Returns</h4>
<dl class="parameters">
  <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.builder.iapplicationbuilder">IApplicationBuilder</a></dt>
  <dd><p>The <code class="paramref">Builder</code> parameter value to allow call chaining.</p>
</dd>
</dl>







<h4 class="section" id="MVVrus_AspNetCore_ActiveSession_ActiveSessionBuilderExtensions_UseActiveSessions_Microsoft_AspNetCore_Builder_IApplicationBuilder_MVVrus_AspNetCore_ActiveSession_IMiddlewareFilterSource__remarks">Remarks</h4>
<div class="markdown level1 remarks"> <toinherit>
<p>
The ActiveSession midleware adds an implementation of the active session feature 
(available through <a class="xref" href="MVVrus.AspNetCore.ActiveSession.IActiveSessionFeature.html">IActiveSessionFeature</a>) interface
to the <a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.http.httpcontext.features">Features</a> collection in the request context. 
This interface makes an active session object available for a request handler that uses the context.
</p>
<p>
If a filter is specified, it defines a scope of requests for which a feature will be added to their contexts.
Not specifying a filter means that an active session will be available for handlers of all requests.
UseActiveSessions methods may be called multiple times to add different filters for different scopes.
All of these calls result in addition of  a single ActiveSession middleware instance to the pipeline.
This instance passes incoming requests to all added filters in order in which they have been added.
If no filter accepts a request, a feature will not be added to the request context.
</p>
<p>
The middleware can be added to the pipeline only if at least one runner factory service (<a class="xref" href="MVVrus.AspNetCore.ActiveSession.IRunnerFactory-2.html">IRunnerFactory&lt;TRequest, TResult&gt;</a>) 
is registered in the application's service container via one of AddActiveSession extension methods defined in the 
<a class="xref" href="MVVrus.AspNetCore.ActiveSession.ActiveSessionServiceCollectionExtensions.html">ActiveSessionServiceCollectionExtensions</a> class.
</p>
 </toinherit>
<p>
This overload of the UseActiveSession method uses an <a class="xref" href="MVVrus.AspNetCore.ActiveSession.IMiddlewareFilterSource.html">IMiddlewareFilterSource</a> interface as a filter to define 
will a request fall into its scope and, if so, which suffix will be used to construct an identifier of an active session 
available to the request handler.
If the <code class="paramref">Filter</code> is omitted or is <a href="https://learn.microsoft.com/dotnet/csharp/language-reference/keywords/null">null</a>, the feature will be added 
to request contexts for all request handlers. 
</p>
Introduced in v.1.1
</div>




<a id="MVVrus_AspNetCore_ActiveSession_ActiveSessionBuilderExtensions_UseActiveSessions_" data-uid="MVVrus.AspNetCore.ActiveSession.ActiveSessionBuilderExtensions.UseActiveSessions*"></a>

<h3 id="MVVrus_AspNetCore_ActiveSession_ActiveSessionBuilderExtensions_UseActiveSessions_Microsoft_AspNetCore_Builder_IApplicationBuilder_System_Func_Microsoft_AspNetCore_Http_HttpContext_System_ValueTuple_System_Boolean_System_String___" data-uid="MVVrus.AspNetCore.ActiveSession.ActiveSessionBuilderExtensions.UseActiveSessions(Microsoft.AspNetCore.Builder.IApplicationBuilder,System.Func{Microsoft.AspNetCore.Http.HttpContext,System.ValueTuple{System.Boolean,System.String}})">
  UseActiveSessions(IApplicationBuilder, Func&lt;HttpContext, (bool, string?)&gt;)
  
</h3>

<div class="markdown level1 summary"><summary>
Adds the ActiveSession midleware to an application middleware pipeline along with a filter defining a scope of HTTP requests, 
for which an active session will be available.
</summary>
</div>
<div class="markdown level1 conceptual"></div>

<div class="codewrapper">
  <pre><code class="lang-csharp hljs">public static IApplicationBuilder UseActiveSessions(this IApplicationBuilder Builder, Func&lt;HttpContext, (bool, string?)&gt; Filter)</code></pre>
</div>

<h4 class="section">Parameters</h4>
<dl class="parameters">
  <dt><code>Builder</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.builder.iapplicationbuilder">IApplicationBuilder</a></dt>
  <dd><param name="Builder">The application middleware pipeline builder
</dd>
  <dt><code>Filter</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.func-2">Func</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.http.httpcontext">HttpContext</a>, (<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a>, <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a>)&gt;</dt>
  <dd><p>A delegate that is used to filter requests for which an active session feature will be available
and to assign them suffix a to be added to an <a class="xref" href="MVVrus.AspNetCore.ActiveSession.ILocalSession.Id.html#MVVrus_AspNetCore_ActiveSession_ILocalSession_Id">Id</a> property of their active session object.</p>
</dd>
</dl>

<h4 class="section">Returns</h4>
<dl class="parameters">
  <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.builder.iapplicationbuilder">IApplicationBuilder</a></dt>
  <dd><p><returns>The <code class="paramref">Builder</code> parameter value to allow call chaining.</returns></p>
</dd>
</dl>







<h4 class="section" id="MVVrus_AspNetCore_ActiveSession_ActiveSessionBuilderExtensions_UseActiveSessions_Microsoft_AspNetCore_Builder_IApplicationBuilder_System_Func_Microsoft_AspNetCore_Http_HttpContext_System_ValueTuple_System_Boolean_System_String____remarks">Remarks</h4>
<div class="markdown level1 remarks"><p><toinherit><p>
The ActiveSession midleware adds an implementation of the active session feature
(available through <a class="xref" href="MVVrus.AspNetCore.ActiveSession.IActiveSessionFeature.html">IActiveSessionFeature</a>) interface
to the <a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.http.httpcontext.features">Features</a> collection in the request context.
This interface makes an active session object available for a request handler that uses the context.</p>
</toinherit></p><p>
If a filter is specified, it defines a scope of requests for which a feature will be added to their contexts.
Not specifying a filter means that an active session will be available for handlers of all requests.
UseActiveSessions methods may be called multiple times to add different filters for different scopes.
All of these calls result in addition of  a single ActiveSession middleware instance to the pipeline.
This instance passes incoming requests to all added filters in order in which they have been added.
If no filter accepts a request, a feature will not be added to the request context.
</p><p>
The middleware can be added to the pipeline only if at least one runner factory service (<a class="xref" href="MVVrus.AspNetCore.ActiveSession.IRunnerFactory-2.html">IRunnerFactory&lt;TRequest, TResult&gt;</a>) 
is registered in the application's service container via one of AddActiveSession extension methods defined in the 
<a class="xref" href="MVVrus.AspNetCore.ActiveSession.ActiveSessionServiceCollectionExtensions.html">ActiveSessionServiceCollectionExtensions</a> class.
</p>
<p>
This UseActiveSessions method overload uses a delegate returning a <a href="https://learn.microsoft.com/dotnet/csharp/language-reference/builtin-types/bool">bool</a> result 
consisting of <a href="https://learn.microsoft.com/dotnet/csharp/language-reference/builtin-types/bool">bool</a> value used decide whever a request falls into the scope of the delegate as a filter
and a value of the suffix to be assigned to an <a class="xref" href="MVVrus.AspNetCore.ActiveSession.ILocalSession.Id.html#MVVrus_AspNetCore_ActiveSession_ILocalSession_Id">Id</a> property. 
</p>
Introduced in v.1.1
</div>




<a id="MVVrus_AspNetCore_ActiveSession_ActiveSessionBuilderExtensions_UseActiveSessions_" data-uid="MVVrus.AspNetCore.ActiveSession.ActiveSessionBuilderExtensions.UseActiveSessions*"></a>

<h3 id="MVVrus_AspNetCore_ActiveSession_ActiveSessionBuilderExtensions_UseActiveSessions_Microsoft_AspNetCore_Builder_IApplicationBuilder_System_Func_Microsoft_AspNetCore_Http_HttpContext_System_Boolean__" data-uid="MVVrus.AspNetCore.ActiveSession.ActiveSessionBuilderExtensions.UseActiveSessions(Microsoft.AspNetCore.Builder.IApplicationBuilder,System.Func{Microsoft.AspNetCore.Http.HttpContext,System.Boolean})">
  UseActiveSessions(IApplicationBuilder, Func&lt;HttpContext, bool&gt;)
  
</h3>

<div class="markdown level1 summary"><summary>
Adds the ActiveSession midleware to an application middleware pipeline along with a filter defining a scope of HTTP requests, 
for which an active session will be available.
</summary>
</div>
<div class="markdown level1 conceptual"></div>

<div class="codewrapper">
  <pre><code class="lang-csharp hljs">public static IApplicationBuilder UseActiveSessions(this IApplicationBuilder Builder, Func&lt;HttpContext, bool&gt; Filter)</code></pre>
</div>

<h4 class="section">Parameters</h4>
<dl class="parameters">
  <dt><code>Builder</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.builder.iapplicationbuilder">IApplicationBuilder</a></dt>
  <dd><param name="Builder">The application middleware pipeline builder
</dd>
  <dt><code>Filter</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.func-2">Func</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.http.httpcontext">HttpContext</a>, <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a>&gt;</dt>
  <dd><p>A predicate that is used to filter requests for which an active session feature will be available.</p>
</dd>
</dl>

<h4 class="section">Returns</h4>
<dl class="parameters">
  <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.builder.iapplicationbuilder">IApplicationBuilder</a></dt>
  <dd><p><returns>The <code class="paramref">Builder</code> parameter value to allow call chaining.</returns></p>
</dd>
</dl>







<h4 class="section" id="MVVrus_AspNetCore_ActiveSession_ActiveSessionBuilderExtensions_UseActiveSessions_Microsoft_AspNetCore_Builder_IApplicationBuilder_System_Func_Microsoft_AspNetCore_Http_HttpContext_System_Boolean___remarks">Remarks</h4>
<div class="markdown level1 remarks"><p><toinherit><p>
The ActiveSession midleware adds an implementation of the active session feature
(available through <a class="xref" href="MVVrus.AspNetCore.ActiveSession.IActiveSessionFeature.html">IActiveSessionFeature</a>) interface
to the <a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.http.httpcontext.features">Features</a> collection in the request context.
This interface makes an active session object available for a request handler that uses the context.</p>
</toinherit></p><p>
If a filter is specified, it defines a scope of requests for which a feature will be added to their contexts.
Not specifying a filter means that an active session will be available for handlers of all requests.
UseActiveSessions methods may be called multiple times to add different filters for different scopes.
All of these calls result in addition of  a single ActiveSession middleware instance to the pipeline.
This instance passes incoming requests to all added filters in order in which they have been added.
If no filter accepts a request, a feature will not be added to the request context.
</p><p>
The middleware can be added to the pipeline only if at least one runner factory service (<a class="xref" href="MVVrus.AspNetCore.ActiveSession.IRunnerFactory-2.html">IRunnerFactory&lt;TRequest, TResult&gt;</a>) 
is registered in the application's service container via one of AddActiveSession extension methods defined in the 
<a class="xref" href="MVVrus.AspNetCore.ActiveSession.ActiveSessionServiceCollectionExtensions.html">ActiveSessionServiceCollectionExtensions</a> class.
</p>
<p>
<filter>
This UseActiveSessions method overload uses the predicate (a delegate returning a <a href="https://learn.microsoft.com/dotnet/csharp/language-reference/builtin-types/bool">bool</a> result) 
to decide which requests fall into its scope 
</filter>
<suffix>
and defines no suffix to be added to an active session identifier.
</suffix>
</p>
</div>




<a id="MVVrus_AspNetCore_ActiveSession_ActiveSessionBuilderExtensions_UseActiveSessions_" data-uid="MVVrus.AspNetCore.ActiveSession.ActiveSessionBuilderExtensions.UseActiveSessions*"></a>

<h3 id="MVVrus_AspNetCore_ActiveSession_ActiveSessionBuilderExtensions_UseActiveSessions_Microsoft_AspNetCore_Builder_IApplicationBuilder_System_String_System_TimeSpan_" data-uid="MVVrus.AspNetCore.ActiveSession.ActiveSessionBuilderExtensions.UseActiveSessions(Microsoft.AspNetCore.Builder.IApplicationBuilder,System.String,System.TimeSpan)">
  UseActiveSessions(IApplicationBuilder, string, TimeSpan)
  
</h3>

<div class="markdown level1 summary"><summary>
Adds the ActiveSession midleware to an application middleware pipeline along with a filter defining a scope of HTTP requests, 
for which an active session will be available.
</summary>
The filter checks the request path against a <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.text.regularexpressions.regex">regular expression</a> passed as a parameter.
</div>
<div class="markdown level1 conceptual"></div>

<div class="codewrapper">
  <pre><code class="lang-csharp hljs">public static IApplicationBuilder UseActiveSessions(this IApplicationBuilder Builder, string Filter, TimeSpan TimeOut = default)</code></pre>
</div>

<h4 class="section">Parameters</h4>
<dl class="parameters">
  <dt><code>Builder</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.builder.iapplicationbuilder">IApplicationBuilder</a></dt>
  <dd><param name="Builder">The application middleware pipeline builder
</dd>
  <dt><code>Filter</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
  <dd><p>String with a regular expression to wich an HTTP request path must match to pass a filter</p>
</dd>
  <dt><code>TimeOut</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.timespan">TimeSpan</a></dt>
  <dd><p>Timeout for the regular expression match operation. Use a value from the configuration if omitted.</p>
</dd>
</dl>

<h4 class="section">Returns</h4>
<dl class="parameters">
  <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.builder.iapplicationbuilder">IApplicationBuilder</a></dt>
  <dd><p><returns>The <code class="paramref">Builder</code> parameter value to allow call chaining.</returns></p>
</dd>
</dl>







<h4 class="section" id="MVVrus_AspNetCore_ActiveSession_ActiveSessionBuilderExtensions_UseActiveSessions_Microsoft_AspNetCore_Builder_IApplicationBuilder_System_String_System_TimeSpan__remarks">Remarks</h4>
<div class="markdown level1 remarks"><p><toinherit><p>
The ActiveSession midleware adds an implementation of the active session feature
(available through <a class="xref" href="MVVrus.AspNetCore.ActiveSession.IActiveSessionFeature.html">IActiveSessionFeature</a>) interface
to the <a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.http.httpcontext.features">Features</a> collection in the request context.
This interface makes an active session object available for a request handler that uses the context.</p>
</toinherit></p><p>
If a filter is specified, it defines a scope of requests for which a feature will be added to their contexts.
Not specifying a filter means that an active session will be available for handlers of all requests.
UseActiveSessions methods may be called multiple times to add different filters for different scopes.
All of these calls result in addition of  a single ActiveSession middleware instance to the pipeline.
This instance passes incoming requests to all added filters in order in which they have been added.
If no filter accepts a request, a feature will not be added to the request context.
</p><p>
The middleware can be added to the pipeline only if at least one runner factory service (<a class="xref" href="MVVrus.AspNetCore.ActiveSession.IRunnerFactory-2.html">IRunnerFactory&lt;TRequest, TResult&gt;</a>) 
is registered in the application's service container via one of AddActiveSession extension methods defined in the 
<a class="xref" href="MVVrus.AspNetCore.ActiveSession.ActiveSessionServiceCollectionExtensions.html">ActiveSessionServiceCollectionExtensions</a> class.
</p>
<p>
<filter>
This UseActiveSessions method overload uses the request path match 
with the regular expression specified via <code class="paramref">Filter</code> parameter to decide which requests fall into its scope 
</filter>
 <suffix>
and defines no suffix to be added to an active session identifier.
</suffix>
</p>
</div>




<a id="MVVrus_AspNetCore_ActiveSession_ActiveSessionBuilderExtensions_UseActiveSessions_" data-uid="MVVrus.AspNetCore.ActiveSession.ActiveSessionBuilderExtensions.UseActiveSessions*"></a>

<h3 id="MVVrus_AspNetCore_ActiveSession_ActiveSessionBuilderExtensions_UseActiveSessions_Microsoft_AspNetCore_Builder_IApplicationBuilder_System_Func_Microsoft_AspNetCore_Http_HttpContext_System_Boolean__System_String_" data-uid="MVVrus.AspNetCore.ActiveSession.ActiveSessionBuilderExtensions.UseActiveSessions(Microsoft.AspNetCore.Builder.IApplicationBuilder,System.Func{Microsoft.AspNetCore.Http.HttpContext,System.Boolean},System.String)">
  UseActiveSessions(IApplicationBuilder, Func&lt;HttpContext, bool&gt;, string)
  
</h3>

<div class="markdown level1 summary"><summary>
Adds the ActiveSession midleware to an application middleware pipeline along with a filter defining a scope of HTTP requests, 
for which an active session will be available.
</summary>
</div>
<div class="markdown level1 conceptual"></div>

<div class="codewrapper">
  <pre><code class="lang-csharp hljs">public static IApplicationBuilder UseActiveSessions(this IApplicationBuilder Builder, Func&lt;HttpContext, bool&gt; Filter, string Suffix)</code></pre>
</div>

<h4 class="section">Parameters</h4>
<dl class="parameters">
  <dt><code>Builder</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.builder.iapplicationbuilder">IApplicationBuilder</a></dt>
  <dd><param name="Builder">The application middleware pipeline builder
</dd>
  <dt><code>Filter</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.func-2">Func</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.http.httpcontext">HttpContext</a>, <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a>&gt;</dt>
  <dd><param name="Filter">
A predicate that is used to filter requests for which an active session feature will be available.

</dd>
  <dt><code>Suffix</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
  <dd><p>The suffix to be added to an <a class="xref" href="MVVrus.AspNetCore.ActiveSession.ILocalSession.Id.html#MVVrus_AspNetCore_ActiveSession_ILocalSession_Id">Id</a> property
of active sessions assigned to requests that falls into the scope of the filter set by this method.</p>
</dd>
</dl>

<h4 class="section">Returns</h4>
<dl class="parameters">
  <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.builder.iapplicationbuilder">IApplicationBuilder</a></dt>
  <dd><p><returns>The <code class="paramref">Builder</code> parameter value to allow call chaining.</returns></p>
</dd>
</dl>







<h4 class="section" id="MVVrus_AspNetCore_ActiveSession_ActiveSessionBuilderExtensions_UseActiveSessions_Microsoft_AspNetCore_Builder_IApplicationBuilder_System_Func_Microsoft_AspNetCore_Http_HttpContext_System_Boolean__System_String__remarks">Remarks</h4>
<div class="markdown level1 remarks"><p><toinherit><p>
The ActiveSession midleware adds an implementation of the active session feature
(available through <a class="xref" href="MVVrus.AspNetCore.ActiveSession.IActiveSessionFeature.html">IActiveSessionFeature</a>) interface
to the <a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.http.httpcontext.features">Features</a> collection in the request context.
This interface makes an active session object available for a request handler that uses the context.</p>
</toinherit></p><p>
If a filter is specified, it defines a scope of requests for which a feature will be added to their contexts.
Not specifying a filter means that an active session will be available for handlers of all requests.
UseActiveSessions methods may be called multiple times to add different filters for different scopes.
All of these calls result in addition of  a single ActiveSession middleware instance to the pipeline.
This instance passes incoming requests to all added filters in order in which they have been added.
If no filter accepts a request, a feature will not be added to the request context.
</p><p>
The middleware can be added to the pipeline only if at least one runner factory service (<a class="xref" href="MVVrus.AspNetCore.ActiveSession.IRunnerFactory-2.html">IRunnerFactory&lt;TRequest, TResult&gt;</a>) 
is registered in the application's service container via one of AddActiveSession extension methods defined in the 
<a class="xref" href="MVVrus.AspNetCore.ActiveSession.ActiveSessionServiceCollectionExtensions.html">ActiveSessionServiceCollectionExtensions</a> class.
</p>
<p>
<filter>
This UseActiveSessions method overload uses the predicate (a delegate returning a <a href="https://learn.microsoft.com/dotnet/csharp/language-reference/builtin-types/bool">bool</a> result) 
to decide which requests fall into its scope 
</filter>
<suffix>
and passes the value of the <code class="paramref">Suffix</code> parameter as a suffix to be added to an active session identifier.
</suffix>
</p>
Introduced in v.1.1
</div>




<a id="MVVrus_AspNetCore_ActiveSession_ActiveSessionBuilderExtensions_UseActiveSessions_" data-uid="MVVrus.AspNetCore.ActiveSession.ActiveSessionBuilderExtensions.UseActiveSessions*"></a>

<h3 id="MVVrus_AspNetCore_ActiveSession_ActiveSessionBuilderExtensions_UseActiveSessions_Microsoft_AspNetCore_Builder_IApplicationBuilder_System_String_System_String_System_TimeSpan_" data-uid="MVVrus.AspNetCore.ActiveSession.ActiveSessionBuilderExtensions.UseActiveSessions(Microsoft.AspNetCore.Builder.IApplicationBuilder,System.String,System.String,System.TimeSpan)">
  UseActiveSessions(IApplicationBuilder, string, string, TimeSpan)
  
</h3>

<div class="markdown level1 summary"><summary>
Adds the ActiveSession midleware to an application middleware pipeline along with a filter defining a scope of HTTP requests, 
for which an active session will be available.
</summary>
</div>
<div class="markdown level1 conceptual"></div>

<div class="codewrapper">
  <pre><code class="lang-csharp hljs">public static IApplicationBuilder UseActiveSessions(this IApplicationBuilder Builder, string Filter, string Suffix, TimeSpan TimeOut = default)</code></pre>
</div>

<h4 class="section">Parameters</h4>
<dl class="parameters">
  <dt><code>Builder</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.builder.iapplicationbuilder">IApplicationBuilder</a></dt>
  <dd><param name="Builder">The application middleware pipeline builder
</dd>
  <dt><code>Filter</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
  <dd><param name="Filter">String with a regular expression to wich an HTTP request path must match to pass a filter
</dd>
  <dt><code>Suffix</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
  <dd><param name="Suffix">The suffix to be added to an <a class="xref" href="MVVrus.AspNetCore.ActiveSession.ILocalSession.Id.html#MVVrus_AspNetCore_ActiveSession_ILocalSession_Id">Id</a> property 
of active sessions assigned to requests that falls into the scope of the filter set by this method.
</dd>
  <dt><code>TimeOut</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.timespan">TimeSpan</a></dt>
  <dd><param name="TimeOut">Timeout for the regular expression match operation. Use a value from the configuration if omitted.
</dd>
</dl>

<h4 class="section">Returns</h4>
<dl class="parameters">
  <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.builder.iapplicationbuilder">IApplicationBuilder</a></dt>
  <dd><p><returns>The <code class="paramref">Builder</code> parameter value to allow call chaining.</returns></p>
</dd>
</dl>







<h4 class="section" id="MVVrus_AspNetCore_ActiveSession_ActiveSessionBuilderExtensions_UseActiveSessions_Microsoft_AspNetCore_Builder_IApplicationBuilder_System_String_System_String_System_TimeSpan__remarks">Remarks</h4>
<div class="markdown level1 remarks"><p><toinherit><p>
The ActiveSession midleware adds an implementation of the active session feature
(available through <a class="xref" href="MVVrus.AspNetCore.ActiveSession.IActiveSessionFeature.html">IActiveSessionFeature</a>) interface
to the <a class="xref" href="https://learn.microsoft.com/dotnet/api/microsoft.aspnetcore.http.httpcontext.features">Features</a> collection in the request context.
This interface makes an active session object available for a request handler that uses the context.</p>
</toinherit></p><p>
If a filter is specified, it defines a scope of requests for which a feature will be added to their contexts.
Not specifying a filter means that an active session will be available for handlers of all requests.
UseActiveSessions methods may be called multiple times to add different filters for different scopes.
All of these calls result in addition of  a single ActiveSession middleware instance to the pipeline.
This instance passes incoming requests to all added filters in order in which they have been added.
If no filter accepts a request, a feature will not be added to the request context.
</p><p>
The middleware can be added to the pipeline only if at least one runner factory service (<a class="xref" href="MVVrus.AspNetCore.ActiveSession.IRunnerFactory-2.html">IRunnerFactory&lt;TRequest, TResult&gt;</a>) 
is registered in the application's service container via one of AddActiveSession extension methods defined in the 
<a class="xref" href="MVVrus.AspNetCore.ActiveSession.ActiveSessionServiceCollectionExtensions.html">ActiveSessionServiceCollectionExtensions</a> class.
</p>
<p>
<filter>
This UseActiveSessions method overload uses the predicate (a delegate returning a <a href="https://learn.microsoft.com/dotnet/csharp/language-reference/builtin-types/bool">bool</a> result) 
to decide which requests fall into its scope 
</filter>
<suffix>
and passes the value of the <code class="paramref">Suffix</code> parameter as a suffix to be added to an active session identifier.
</suffix>
</p>
Introduced in v.1.1
</div>




</article>

        <div class="contribution d-print-none">
        </div>

        
      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


    <footer class="border-top">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>